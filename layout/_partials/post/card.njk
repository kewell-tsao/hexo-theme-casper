{% set post_cover_img = post_card_cover(post) %}
<article class="post-card post {{ " no-image" if not post_cover_img }}">
  {% if post_cover_img %}
    <a class="post-card-image-link" title="{{ post.title }}" href="{{ url_for(post.path) }}">
      <div class="post-card-image" style="background-image: url({{ post_cover_img }})"></div>
    </a>
  {% endif %}
  <div class="post-card-content">
    <a class="post-card-content-link" title="{{ post.title }}" href="{{ url_for(post.path) }}">
      <header class="post-card-header">
        <span class="post-card-tags">
          {% if post.categories %}
            {% for cate in post.categories %}
              {{ cate.name }}
            {% endfor %}|
          {% endif %}
          <time datetime="{{ date_xml(post.date) }}">
            {{ date(post.date, null) }}
          </time>
        </span>
        <h2 class="post-card-title">{{ post.title }}</h2>
      </header>
      <div class="post-card-excerpt">
        <p>
          {% set num = 100 %}
          {% if not post_cover_img %}
            {% set num = 240 %}
          {% endif %}
          {% if loop.first %}
            {% set num = 80 %}
          {% endif %}
          {% set content = post.content | striptags %}
          {% if post.summary %}
            {% set content = post.summary %}
          {% endif %}
          {{ content.substring(0, num) }}
          {% if content.length > num %}...{% endif %}
        </p>
      </div>
    </a>
    <footer class="post-card-meta">
      <div class="author-list">
        <div class="author-list-item">
          <div class="author-name-tooltip">{{ config.author }}</div>
          {% if theme.author_image %}
            <a href="/about" class="static-avatar">
              <img class="author-profile-image" src="{{ theme.author_image }}" alt="{{ config.author }}"/>
            </a>
          {% else %}
            <a href="/about" class="static-avatar author-profile-image">
              {{ partial("_partials/icons/avatar.svg.njk", {}, {cache: true}) }}
            </a>
          {% endif %}
        </div>
      </div>
      <span class="reading-time">
        {{ reading_time(post.content) }} min read
      </span>
    </footer>
  </div>
</article>
